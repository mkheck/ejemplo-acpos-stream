<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spring web socket tutorial</title>
    <script>
        var socket = new WebSocket('ws://' + window.location.host + '/ws');

        <!-- Add an event listener for when a connection is open -->
        socket.onopen = function () {
            console.log('WebSocket connection opened. Ready to send messages.');
        };

        <!-- Add an event listener for when a message is received from the server -->
        socket.onmessage = function (message) {
            // console.log('Message received from server: ');
            // console.log(message);

            var text = "";
            var lastPosText = "";
            var arr = message.data.split("},{");
            if (arr.length > 1) {
                text = "\n" + arr[0] + "}\n\n";
                lastPosText = "{" + arr[arr.length - 1] + "\n\n";
            } else {
                text = "\n" + arr[0] + "\n\n";
            }
            for (i = 1; i < arr.length - 1; i++) {
                text += "{" + arr[i] + "}\n\n";
            }
            text += lastPosText;

            document.getElementById("positions").innerText = text;
        };
    </script>
</head>
<body>
<h1>Current Aircraft Positions</h1>
<div style="border-style: solid; border-width: 2px; margin-top: 15px; margin-bottom: 15px; margin-left: 15px; margin-right: 15px;">
    <label id="positions"></label>
</div>
</body>
</html>